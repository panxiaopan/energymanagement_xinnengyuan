const placeholderObj = {
  zh: {
    name: "请输入社会单位名称",
    registCode: "请输入注册码，注册码为设备铭牌编号",
    latLng: "请选择经纬度，点击右侧选择经纬度按钮",
    industry: '请选择行业',
    safetyManName: '请输入安全责任人姓名',
    safetyManTel: '请输入安全责任人电话(手机/固定电话)',
    unvalidTel: '电话/手机号码格式不正确',
    country: "请选择国家",
    province: "请选择省",
    city: "请选择市/辖区",
    county: "请选择县",
    town: "请选择乡",
    remark: "请输入详细地址",

    installedDate: '请选择安装日期',
    installedCompany: "请输入安装商名称",
    areaCovered: '请输入占地面积',
    grossFloorArea: '请输入建筑面积',
    nature: '请输入社会单位性质',
    numberOfEmployees: '请输入从业人数',
    contactNumber: '请输入单位联系电话',
    contactEmail: '请输入单位邮箱',

    mainEntrancePics: '单位正门图',
    exitPics: '安全出口图',
    fireHydrantPics: '消防栓图',
    importanceSectionPics: '消防重点区域图',
    evacuationPlanPics: '火警疏散平面图',

    fireFacilityTypes: '请输入消防设施种类',
    numberOfFireLanes: '请输入消防车道数',
    numberOfExits: '请输入安全出口数',
    numberOfFireElevators: '请输入消防电梯数',
    numberOfFireExtinguishers: '请输入灭火器数',

    hasPowder: '是否产生粉尘',
    hasExplosiveGas: '是否产生易燃易爆气体',
    hasHazardousChemical: '是否产生危险化学物品',
    hasFlammableStorage: '是否有易燃储存物'
  },
  en: {
    name: "Please input name",
    registCode: "Please input registCode",
    latLng: "Please input latLng",
    industry: 'Please input industry',
    safetyManName: 'Please input the name of responsible',
    safetyManTel: 'Please input the telephone of responsible',
    unvalidTel: 'Unvalid telephone number',
    // deviceName: 'Please input device name',
    // deviceTreeId: 'Please select device type/brand/model',
    // deviceClassId: 'Please input device type',
    // deviceBrandId: 'Please input device brand',
    // deviceTypeId: 'Please input device model',
    // commId: 'Please input comm.id',
    // location: 'Please input device position',
    // mainCircuitCurrent: 'Please input main circuit level',
    country: "Please input country",
    province: "Please input province",
    city: "Please input city",
    county: "Please input county",
    town: "Please input town",
    remark: "Please input remark",

    installedDate: 'Please input installed date',
    installedCompany: "Please input installedCompany",
    areaCovered: 'Please input area covered',
    grossFloorArea: 'Please input gross floor area',
    nature: 'Please input nature',
    numberOfEmployees: 'Please input number of employees',
    contactNumber: 'Please input contact number',
    contactEmail: 'Please input contact email',

    mainEntrancePics: '',
    exitPics: '',
    fireHydrantPics: '',
    importanceSectionPics: '',
    evacuationPlanPics: '',

    fireFacilityTypes: 'Please input fire facility types',
    numberOfFireLanes: 'Please input number of fire lanes',
    numberOfExits: 'Please input number of exits',
    numberOfFireElevators: 'Please input number of fire elevators',
    numberOfFireExtinguishers: 'Please input number of fire extinguishers',

    hasPowder: '',
    hasExplosiveGas: '',
    hasHazardousChemical: '',
    hasFlammableStorage: ''
  }
};
const labelTextObj = {
  zh: {
    name: "社会单位名称",
    registCode: "注册码",
    latLng: "经纬度",
    industry: '行业',
    safetyManName: '安全责任人姓名',
    safetyManTel: '安全责任人电话',
    deviceName: '设备名称',
    // deviceTreeId: '设备类型/品牌/型号',
    // deviceClassId: '设备类型',
    // deviceBrandId: '设备品牌',
    // deviceTypeId: '设备型号',
    // commId: '通信Id',
    // location: '设备位置',
    // mainCircuitCurrent: '电流互感器规格',
    area: '所在地区',
    country: "国家",
    province: "省",
    city: "市",
    county: "县",
    town: "乡",
    remark: "详细地址",

    installedDate: '安装日期',
    installedCompany: "安装商名称",
    areaCovered: '占地面积(㎡)',
    grossFloorArea: '建筑面积(㎡)',
    nature: '社会单位性质',
    numberOfEmployees: '从业人数',
    contactNumber: '单位联系电话',
    contactEmail: '单位邮箱',

    mainEntrancePics: '单位正门图',
    exitPics: '安全出口图',
    fireHydrantPics: '消防栓图',
    importanceSectionPics: '消防重点区域图',
    evacuationPlanPics: '火警疏散平面图',

    fireFacilityTypes: '消防设施种类',
    numberOfFireLanes: '消防车道数',
    numberOfExits: '安全出口数',
    numberOfFireElevators: '消防电梯数',
    numberOfFireExtinguishers: '灭火器数',

    hasPowder: '是否产生粉尘',
    hasExplosiveGas: '是否产生易燃易爆气体',
    hasHazardousChemical: '是否产生危险化学物品',
    hasFlammableStorage: '是否有易燃储存物'
  },
  en: {
    name: "Name",
    registCode: "RegistCode",
    latLng: "Lat.lng",
    industry: 'Industry',
    safetyManName: 'SafetyManName',
    safetyManTel: 'SafetyManTel',
    // deviceName: 'DeviceName',
    // deviceTreeId: 'Device type/brand/model',
    // deviceClassId: 'Device classId',
    // deviceBrandId: 'Device brandId',
    // deviceTypeId: 'DeviceTypeId',
    // commId: 'Comm.Id',
    // location: 'Location',
    // mainCircuitCurrent: 'Main circuit current',
    area: 'Area',
    country: "Country",
    province: "Province",
    city: "City",
    county: "County",
    town: "Town",
    remark: "Remark",

    installedDate: 'Installed date',
    installedCompany: "Installed company",
    areaCovered: 'Area covered',
    grossFloorArea: 'Gross floor area',
    nature: 'Nature',
    numberOfEmployees: 'Number of employees',
    contactNumber: 'contactNumber',
    contactEmail: 'contactEmail',

    mainEntrancePics: 'mainEntrancePics',
    exitPics: 'exitPics',
    fireHydrantPics: 'fireHydrantPics',
    importanceSectionPics: 'importanceSectionPics',
    evacuationPlanPics: 'evacuationPlanPics',

    fireFacilityTypes: 'fireFacilityTypes',
    numberOfFireLanes: 'numberOfFireLanes',
    numberOfExits: 'numberOfExits',
    numberOfFireElevators: 'numberOfFireElevators',
    numberOfFireExtinguishers: 'numberOfFireExtinguishers',

    hasPowder: 'hasPowder',
    hasExplosiveGas: 'hasExplosiveGas',
    hasHazardousChemical: 'hasHazardousChemical',
    hasFlammableStorage: 'hasFlammableStorage'
  }
}

// 语言显示lang 是否新增表单isAdd--新增表单含默认设备信息，修改表单含消防信息
export default function (lang = 'zh') {
  // console.log("is add+++++++", isAdd)
  const commonValidator = (rule, item, callback) => {
    let value = item.value
    let tips = item.placeholder
    if (value === "") {
      callback(new Error(tips));
    } else {
      callback();
    }
  };
  const areaValidator = (rule, item, callback) => {
    let value = item.value
    // let tips = item.placeholder
    let {
      country,
      province,
      city,
      county,
      town
    } = value,
    countryValid = !(country && country.code),
      provinceValid = !(province && province.code),
      cityValid = !(city && city.code),
      countyValid = !(county && county.code),
      townValid = !(town && town.code)
    // 分别判断省市区县级别是否有数据
    if (countryValid) {
      callback(new Error(placeholderObj[lang]['country']));
    } else if (provinceValid) {
      callback(new Error(placeholderObj[lang]['province']));
    } else if (cityValid) {
      callback(new Error(placeholderObj[lang]['city']));
    } else if (countyValid) {
      callback(new Error(placeholderObj[lang]['county']));
    } else if (townValid) {
      callback(new Error(placeholderObj[lang]['town']));
    } else {
      callback();
    }
  };
  const telValidator = (rule, item, callback) => {
    let value = item.value
    let tips = item.placeholder
    let unValidTips = placeholderObj[lang]['unvalidTel']
    // let name = item.name || ''
    let fixedReg = /^(([0\+]\d{2,3}-)?(0\d{2,3})-)?(\d{7,8})(-(\d{3,}))?$/
    let mobileReg = /^1(3|4|5|7|8)\d{9}$/
    // console.log('tel value', value, mobileReg.test(value), fixedReg.test(value))
    if (value === "" || (value.trim && value.trim().length === 0)) {
      callback(new Error(tips));
    } else if (!(fixedReg.test(value) || mobileReg.test(value))) { //手机和固定电话校验
      callback(new Error(unValidTips))
    } else {
      callback();
    }
  }

  // 表单校验规则
  let formObjRules = {
    name: [{
      type: "string",
      required: true,
      validator: commonValidator,
      trigger: "blur"
    }],
    registCode: [{
      type: "string",
      required: true,
      validator: commonValidator,
      trigger: "blur"
    }],
    latLng: [{
      type: "string",
      required: true,
      validator: commonValidator,
      trigger: "blur"
    }],
    industry: [{
      type: "string",
      required: true,
      validator: commonValidator,
      trigger: "blur"
    }],
    area: [{
      type: "array",
      required: true,
      validator: areaValidator,
      trigger: "blur"
    }],
    safetyManName: [{
      type: "string",
      required: true,
      validator: commonValidator,
      trigger: "blur"
    }],
    safetyManTel: [{
      type: "string",
      required: true,
      validator: telValidator,
      trigger: "blur"
    }]
  };

  const addrArr = ['country', 'province', 'city', 'county', 'town', 'remark'];
  let addrObj = {};
  addrArr.forEach(item => {
    addrObj[item] = {
      name: "",
      value: "",
      type: item
    };
  });

  const formObjKey = [
    'name',
    'latLng',
    'area', //地址选择区域组成的值country,province,city,county,town
    'remark', //详细地址
    'industry',
    'safetyManName',
    'safetyManTel',

    'installedDate',
    'installedCompany', //安装商
    'areaCovered',
    'grossFloorArea',
    'nature',
    'numberOfEmployees',
    'contactNumber',
    'contactEmail',
    // 以下是消防相关表单项
    'mainEntrancePics',
    'exitPics',
    'fireHydrantPics',
    'importanceSectionPics',
    'evacuationPlanPics',

    'fireFacilityTypes',
    'numberOfFireLanes',
    "numberOfExits",
    "numberOfFireElevators",
    "numberOfFireExtinguishers",

    "hasPowder",
    "hasExplosiveGas",
    "hasHazardousChemical",
    "hasFlammableStorage"
  ];
  const hideKey = ['installedDate',
    'installedCompany', //安装商
    'areaCovered',
    'grossFloorArea',
    'nature',
    'numberOfEmployees',
    'contactNumber',
    'contactEmail',
    // 以下是消防相关表单项
    'mainEntrancePics',
    'exitPics',
    'fireHydrantPics',
    'importanceSectionPics',
    'evacuationPlanPics',

    'fireFacilityTypes',
    'numberOfFireLanes',
    "numberOfExits",
    "numberOfFireElevators",
    "numberOfFireExtinguishers",

    "hasPowder",
    "hasExplosiveGas",
    "hasHazardousChemical",
    "hasFlammableStorage"
  ];
  const formTypeMap = new Map([
    ['latLng', 'latLng'],
    ['area', 'area'],
    ['industry', 'select'],
    ['nature', 'select'],
    ['fireFacilityTypes', 'multiSelect'],
    ['installedDate', 'datePicker'],

    ['areaCovered', 'number'],
    ['grossFloorArea', 'number'],
    ['numberOfEmployees', 'number'],
    ['numberOfFireLanes', 'number'],
    ['numberOfExits', 'number'],
    ['numberOfFireElevators', 'number'],
    ['numberOfFireExtinguishers', 'number'],

    ['mainEntrancePics', 'img'],
    ['exitPics', 'img'],
    ['fireHydrantPics', 'img'],
    ['importanceSectionPics', 'img'],
    ['evacuationPlanPics', 'img'],
    ["hasPowder", 'switch'],
    ["hasExplosiveGas", 'switch'],
    ["hasHazardousChemical", 'switch'],
    ["hasFlammableStorage", 'switch']
  ])
  // const arrValueKey = ['deviceTreeId', 'area']
  let formObj = {};
  formObjKey.forEach(key => {
    let value = '',
      type = 'string'

    if (key === 'area') {
      value = {
        country: null,
        province: null,
        city: null,
        county: null,
        town: null
      }
      type = 'object'
    } else if (key.slice(-4) === 'Pics') {
      value = []
      type = 'array'
    } else if (key.slice(0, 3) === 'has') {
      value = false
      type = 'boolean'
    }
    formObj[key] = {
      name: key,
      value,
      label: labelTextObj[lang][key],
      formType: formTypeMap.get(key) || 'string',
      type,
      show: true,
      placeholder: typeof placeholderObj[lang][key] === "undefined" ? "" : placeholderObj[lang][key]
    };
    // if (formTypeMap.get(key) === 'select') {
    //   formObj[key]['url'] = 
    // }
  });
  addrArr.forEach(addr => {
    //详细地址通过上述表单key写入
    if (addr === 'remark') {
      return
    }
    formObj[addr] = {
      name: addr,
      value: '',
      formType: formTypeMap.get(addr) || 'string',
      type: "string",
      show: false,
      disabled: true,
      placeholder: placeholderObj[lang][addr]
    };
  });
  hideKey.forEach(key => {
    if (formObj[key] && formObj[key]["show"]) {
      formObj[key]["show"] = false;
    }
  });
  let submitFormKey = [
    "areaId",
    "longitude",
    "latitude",
    "addrjson",
    "name",
    "industry",
    "safetyManName",
    "safetyManTel",

    'installedCompany', //安装商
    'areaCovered',
    'grossFloorArea',
    'nature',
    'numberOfEmployees',
    'contactNumber',
    'contactEmail',

    'addedMainEntrancePics',
    'existedMainEntrancePics',
    'addedExitPics',
    'existedExitPics',
    'addedFireHydrantPics',
    'existedFireHydrantPics',
    'addedImportanceSectionPics',
    'existedImportanceSectionPics',
    'addedEvacuationPlanPics',
    'existedEvacuationPlanPics',

    'fireFacilityTypes',
    'numberOfFireLanes',
    "numberOfExits",
    "numberOfFireElevators",

    "numberOfFireExtinguishers",
    "hasPowder",
    "hasExplosiveGas",
    "hasHazardousChemical",
    "hasFlammableStorage"
  ]
  return {
    formObj,
    formObjRules,
    formObjKey,
    hideKey,
    addrArr,
    addrObj,
    submitFormKey
  }
}